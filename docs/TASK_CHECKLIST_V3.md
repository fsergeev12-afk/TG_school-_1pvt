# Task Checklist — MVP v3.0

Опираться на: `PRD_Telegram_Course_Platform_MVP_v3_0.md`, `v0_prompts_v3_0.md`, `IMPLEMENTATION_PLAN_V3.md`. Скриншоты в `shablony for front/` — только визуальный референс; функционал брать из PRD v3.0.

## Фронтенд — Ученик
- [ ] Dashboard: курс без демо, статус доступа (первый урок / все доступны), кнопка «Перейти к курсу».
- [ ] Course page: блоки/уроки; блокировка по оплате → экран оплаты; блокировка по дате → модалка с датой.
- [ ] Lesson page: гибридное видео (file_id или внешняя ссылка), материалы (PDF/DOC), кнопка «Задать вопрос» → редирект в бота, навигация по урокам.
- [ ] Payment screen: активная оплата (redirect на внешнюю ссылку), промокод (free/%/фикс), состояние успех/ошибка, итоговая цена, нет DEMO-текстов.

## Фронтенд — Создатель
- [ ] Bottom navigation: Курсы / Потоки / Чаты / Настройки.
- [ ] Курсы: мультикурсовость, загрузка обложки (JPG/PNG до 5MB), создание/редактирование 2 шага (инфо + структура, drag-and-drop, тип урока, материалы).
- [ ] Потоки: мастер 4 шага (курс → расписание уроков чекбокс → уведомления → название), цена курса, включение расписания на уроках.
- [ ] Детальная потока: вкладки Ученики / Рассылка / Оплаты / ⚙️; статусы учеников (Приглашен+не оплачено / Активен+не оплачено / Активен+оплачено), переход в Чаты по непрочитанным.
- [ ] Оплаты: реальная статистика (переходы, оплачено, конверсия, выручка, последние платежи); никаких DEMO.
- [ ] Промокоды: список, создание/редактирование/удаление; типы free/%/фикс, лимиты, срок действия.
- [ ] Чаты: список диалогов (фильтр по потокам, непрочитанные), экран диалога с отправкой сообщений.

## Бэкенд
- [ ] Миграции v3: таблицы `promo_code_usages`, `lesson_schedules`, `lesson_materials`, `conversations`, `messages`; расширения `courses` (cover_image_url, description), `lessons` (video_type, video_telegram_file_id, video_external_url, description), `blocks` (description), `streams` (price, schedule_enabled), `stream_students` (invitation_status, payment_status, activated_at, paid_at).
- [ ] Биллинг: endpoint для создания внешней платежной ссылки (провайдер TBD, вероятно ЮKassa); обработка возврата/ошибки (redirect/params); структура для webhook провайдера (заглушка до выбора).
- [ ] Промокоды: валидация (срок, лимит, повторное использование), применение; free → auto paid, фиксация usage.
- [ ] Расписание: cron открывает уроки по датам, уведомляет учеников (Bot API).
- [ ] Чаты: webhook Telegram, сохранение сообщений, непрочитанные, ответ создателя → Bot API, фильтр по потокам.
- [ ] Гибридное видео: сохранение file_id (Telegram) или внешней ссылки; материалы уроков (Telegram file_id), обложки (CDN/S3).

## Интеграции / настройки
- [ ] Webhook бота: `/telegram/webhook` на боевой/стейджинг домен.
- [ ] Menu Button Mini App: боевой/стейджинг фронтовый домен.
- [ ] CORS: FRONTEND_URL в `.env` backend.

## Очистка перед git
- [ ] Удалить/исключить временные экспорты (например, `shablony/__tmp_inno`, `__MACOSX`, html/mhtml мок), по согласованию.
- [ ] Проверить `.gitignore` на dist/build/env/db.
- [ ] В `docs/` оставить актуальные v3 файлы; v2 уже в `docs/archive/`.


